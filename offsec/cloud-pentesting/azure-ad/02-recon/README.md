# 02 - Recon

## Tenant Discovery

**Manually**

**• Get if Azure tenant is in use, tenant name and Federation**&#x20;

```powershell
https://login.microsoftonline.com/getuserrealm.srf?login=[USERNAME@DOMAIN]&xml=1
```



**• Get the Tenant ID**

```powershell
https://login.microsoftonline.com/[DOMAIN]/.well-known/openid-configuration
```



**• Validate Email ID by sending POST requests to**

```powershell
https://login.microsoftonline.com/common/GetCredentialType
```

### AADInternals

`Import-Module .\AADInternals.psd1 -verbose`

**Get tenant name, authentication, brand and domain name**

```powershell
Get-AADIntLoginInformation -Username dontexist@company.onmicrosoft.com
```

**Retrieve TenantID**

`Get-AADIntTenantID -domain company.onmicrosoft.com`

**Get Tenant domains**

```powershell
Get-AADIntTenantDomains -Domain company.com
```

**Get all info as an outsider**

```powershell
Invoke-AADIntReconAsOutsider -DomainName company.onmicrosoft.comer
```



{% embed url="https://github.com/Gerenios/AADInternals" %}

## Email IDS

> Search for valid email addresses and proceed with password spraying attacks

### o365creper

{% embed url="https://github.com/LMGsec/o365creeper" %}

**Usage:**

```python
C:\Python27\python.exe .\o365creeper.py -f C:\Desktop\email.txt -o C:\Desktop\target-email.txt
```

## Azure subdomains

```powershell
C:\Tools\MicroBurst\Misc> . C:\Tools\MicroBurst\Misc\Invoke-EnumerateAzureSubDomains.ps1
```

```powershell
C:\Tools\MicroBurst\Misc> Invoke-EnumerateAzureSubDomains -Base company -Verbose
```
